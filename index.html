<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title><%= htmlWebpackPlugin.options.title %></title>
  </head>
  <body style="text-align:center;">
    <div style="margin:20px auto; width:768px; display:inline-block;">
        <h1>ScryptaCoreJS</h1>
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab&display=swap" rel="stylesheet">
        <button onClick="getNewAddress()">CREATE NEW ADDRESS</button>
        <pre style="width:100%; overflow:hidden; padding:10px; overflow-x:scroll; background:#eee; border-radius:5px" id="newaddressresponse"></pre>
        <button onClick="testWrite()">TEST WRITE</button>
        <pre style="width:100%; overflow:hidden; padding:10px; overflow-x:scroll; background:#eee; border-radius:5px" id="writeresponse"></pre>
    </div>
    <style>
        *{
            font-family: 'Roboto Slab', serif;
        }
    </style>
    <script>
        function getNewAddress(){
            window.ScryptaCore.createAddress('test').then(response => {
                document.getElementById('newaddressresponse').innerHTML = JSON.stringify(response)
            })
        }

        function testWrite(){
            var address = 'LdRQokR1i3XDtj1V3jnCRqMPrVc7sYkeE2'
            var pubkey = '03a2b152761ab5b8aedbb07dea15dedacf12a68abd8b73a4f99a6f1f322792ee27'
            var privkey = 'Sq9GWa9vyM1HghsnVan5UJhtx2GumTaLBTHgDhCW4abjzZLmsYmr'
            var password = 'test'
            var metadata = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis quis risus auctor, eleifend neque sit amet, ultricies nulla. Suspendisse condimentum nisi ut nunc mattis, vel congue velit congue. Aliquam sit amet pharetra tellus. Etiam tellus lacus, pretium vel commodo a, tempor nec ante. Aenean turpis nisi, pulvinar eget vehicula at, dapibus at dui. Cras vitae dictum massa. Sed in orci lorem. Nullam ut mattis lacus. Mauris ut mattis tellus. Donec et posuere lorem, id elementum ligula. Aliquam eu mollis neque, eget venenatis erat. Aenean vestibulum nunc diam, et luctus massa porttitor ac. Morbi tempor eleifend bibendum. Curabitur sed diam leo.'
            var protocol = ''

            window.ScryptaCore.restoreAddress(address,pubkey,privkey,password).then(wallet => {
                window.ScryptaCore.connectNode().then(node => {
                    window.ScryptaCore.write(password, metadata, '', '', protocol, '').then(response => {
                        document.getElementById('writeresponse').innerHTML = JSON.stringify(response)
                    })
                })
            })
        }
    </script>
  </body>
</html>